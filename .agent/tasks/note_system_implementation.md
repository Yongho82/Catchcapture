# Task: Capture Note System (SQLite Integrated) Implementation Plan

CatchCapture 앱 내에 스크린샷과 메모를 체계적으로 관리할 수 있는 **'내 노트'** 시스템을 구축합니다.

## 0. 개발 원칙 (Development Principles)
- [ ] **언어 우선순위**: 초기 모든 UI 및 메시지는 **한국어(ko)**를 기준으로 우선 개발하며, 다국어 패치는 전체 기능 완료 후 진행함.
- [ ] **디자인 일관성**: 기존 CatchCapture의 현대적이고 세련된 테마를 유지함.

## 1. 기반 인프라 구축 (Infrastructure)
- [x] **SQLite 환경 설정**
  - [x] `Microsoft.Data.Sqlite` NuGet 패키지 추가
  - [x] DB 관리 클래스 (`DatabaseManager.cs`) 구현 (Singleton 패턴)
  - [x] 데이터베이스 스키마 설계 및 테이블 생성 (`Notes`, `NoteImages`, `Tags`, `NoteTags`)
- [x] **저장소 및 동기화 설정**
  - [x] 사용자 정의 DB 저장 경로 설정 기초 로직 구현
  - [x] 이미지 저장을 위한 전용 `img` 폴더 자동 생성 로직 반영
  - [ ] 이미지 상대 경로 처리 (PC 이동 시에도 링크 유지 로직)

## 2. 노드 입력 UI (Add Note Window)
- [ ] **입력 전용 창 (`NoteInputWindow.xaml`) 개발**
  - [ ] **Aesthetics**: Glassmorphism 디자인, 배경 흐림(Blur), 둥근 모서리 (12-15px)
  - [ ] **Layout**:
    - [ ] 상단: 제목 입력 필드 (아이콘 포함, 세련된 보더)
    - [ ] 중앙 매끄러운 카드 영역: 썸네일과 텍스트 영역이 자연스럽게 연결된 디자인
    - [ ] 하단 버튼: 'Save to My Notes' 버튼은 브랜드 컬러 그라데이션 적용
  - [ ] **Interaction**: 썸네일 마우스 오버 시 미세한 확대 효과, 더블 클릭 시 모달 팝업으로 전체 이미지 표시
- [ ] **진입점 연결**
  - [ ] 메인 리스트 호버 시 '노트 저장' 아이콘 노출 및 클릭 이벤트 연결
  - [ ] `PreviewWindow` (스니핑/편집) 내 '노트 저장' 버튼 추가

## 3. 내 노트 보기 창 (Note Explorer)
- [ ] **갤러리/관리 창 (`NoteExplorerWindow.xaml`) 개발**
  - [ ] **Sidebar (탐색기)**
    - [ ] 아이콘 중심의 깔끔한 목록 (Fluent UI 스타일 아이콘)
    - [ ] 선택된 카테고리에 포인트 컬러 액센트
  - [ ] **Center List (목록 영역)**
    - [ ] '그리드 뷰' 우선: 이미지 썸네일이 돋보이는 카드 레이아웃
    - [ ] 카드 디자인: 하단에 제목과 날짜가 반투명 오버레이로 표시됨
  - [ ] **Right Detail (상세 보기)**
    - [ ] 텍스트 영역은 '디지털 종이' 느낌의 부드러운 배경색 사용
    - [ ] 이미지 확대 시 부드러운 애니메이션 (Zoom Transition) 반영
  - [ ] **Search Bar**: 상단 고정, 입력 시 즉각적인 필터링 반응 (Debounce 적용)
- [ ] **노트 수정 및 관리**
  - [ ] 기존 저장된 노트의 제목, 본문, 태그 수정(Update) 기능
  - [ ] 개별 노트의 삭제/복구 인터페이스
- [ ] **통합 검색 기능**
  - [ ] 제목 및 본문 텍스트 검색
  - [ ] **OCR 기반 이미지 내 텍스트 검색 연동**

## 4. 고급 기능 및 지능화 (Intelligence)
- [ ] **Context Capture 구현**
  - [ ] 캡처 시 활성 윈도우의 프로그램명, 파일명, 웹 URL 자동 수집
- [ ] **OCR 자동 태깅**
  - [ ] 이미지 캡처 후 백그라운드에서 OCR 수행 및 추천 키워드 생성
- [ ] **멀티 스크린샷 지원**
  - [ ] 하나의 노트에 여러 장의 이미지를 추가/관리할 수 있는 구조 반영
- [ ] **내보내기 및 확장**
  - [ ] 드래그 앤 드롭으로 이미지 파일 외부(카톡, 탐색기 등) 공유 지원
  - [ ] 노트를 **PDF 또는 긴 이미지 리포트**로 내보내는 기능
  - [ ] 외부 이미지 파일을 앱으로 드래그하여 즉시 노트화 (Import)

## 5. 설정 및 보안 (Settings & Security)
- [ ] **설정창 내 '내 노트 관리' 섹션 추가**
  - [x] DB 저장 위치 변경 기능 (탐색기 연동)
  - [ ] **데이터베이스 백업 및 복구**:
    - [ ] 현재 설정된 노트 폴더 전체를 하나의 압축 파일(.zip)로 내보내기 기능
    - [ ] 기존 백업본(.zip)을 가져와서 현재 노트 폴더에 덮어씌우는 복구 기능
  - [ ] **이미지 자동 최적화 (압축)**:
    - [ ] 노트 저장 시 이미지 품질 조절 옵션 추가 (용량 절감)
  - [ ] **노트 보관 기간 설정**: 영구 저장, 30일, 60일, 6개월 등 사용자 선택 기능
  - [ ] 자동 정리 및 DB 초기화 기능 (성능 유지용)
  - [ ] 노트 데이터 수동 최적화 및 정리 기능
- [ ] **보안 및 개인정보 보호 (비밀번호 잠금)**
  - [ ] 노트 접근용 **비밀번호 설정** 기능
  - [ ] **경고 시스템**: "비밀번호 분실 시 로컬 저장 특성상 데이터 복구가 불가능합니다" 경고 문구 명시
  - [ ] **비밀번호 힌트**: 최초 비밀번호 설정 시 힌트 입력 필수화
  - [ ] 앱 실행 또는 노트 탐색기 진입 시 잠금 해제 UI
- [ ] **동기화 및 공유**
  - [ ] 자동 백업 스케줄링 (주기적 파일 복사)
  - [ ] DB 수동 업로드/다운로드 브릿지 준비

## 6. 디자인 가이드라인 (Design Guidelines)
- [ ] **Theme**: 시스템 다크모드/라이트모드 완벽 대응 (고대비 지원)
- [ ] **Color Palette**: 포인트 컬러(Deep Blue / Azure), 배경(Dark Grayish Blue), 텍스트(Off-White)
- [ ] **Typography**: 'Pretendard' 또는 'Inter' 폰트 사용, 가독성 중심의 행간 조절
- [ ] **Micro-animations**:
  - [ ] 버튼 클릭 시 Ripple/Pulse 효과
  - [ ] 창 전환 시 Fade & Slide In 애니메이션
  - [ ] 리스트 스크롤 시 부드러운 관성 스크롤

## 7. 최적화 및 폴리싱
- [ ] **데이터 관리 및 유지보수**
  - [ ] **휴지통(Trash)** 기능: 삭제된 노트를 일정 기간 보관 후 영구 삭제 로직
  - [ ] **DB 최적화**: 앱 종료 시 또는 주기적으로 DB 압축(VACUUM) 실행
  - [ ] **중복 방지**: 동일한 이미지 파일이 중복 등록되지 않도록 해시값 기반 체크
- [ ] 대용량 이미지 로딩 속도 최적화 (가상화 리스트 사용)
- [ ] DB 백업 및 복구 기능
- [ ] 단축키 연동 (마지막 캡처본 즉시 노트 저장 Shortcut)
