# 노트/히스토리 데이터 보호 (오프라인/연결 불안정 감지)

## 문제 상황
사용자가 클라우드 경로(네트워크 드라이브 등)를 설정했으나, 앱 실행 시점이나 저장 시점에 해당 경로가 잡히지 않는 경우(로딩 지연, 연결 실패 등), 앱이 이를 "저장소가 비어있음" 또는 "새로운 경로"로 오인하여 로컬 캐시 데이터를 삭제해버리는 문제가 있었습니다.
이 상태에서 사용자가 새 데이터를 작성하고 나중에 클라우드 연결이 복구되면, "거의 비어있는" 로컬 데이터가 클라우드 원본을 덮어써서 기존 데이터가 유실되는 사고가 발생할 수 있습니다.

## 해결 방안: "마지막 동기화 경로 기록" (Last Synced Path Meta)

로컬 데이터가 단순 캐시인지, 아니면 사용자가 의도한 초기화인지 구분하기 위해 **마지막으로 성공한 동기화 경로**를 별도 파일(`catch_sync_meta.txt`)에 기록합니다.

### 동작 로직 변경

1. **동기화 성공 시**:
   - 클라우드 DB를 로컬로 복사한 후, 해당 클라우드 경로를 메타 파일에 기록합니다.

2. **동기화 실패 시 (클라우드 파일 없음)**:
   - **기존 로직**: 무조건 로컬 DB를 삭제하고 초기화했습니다. (데이터 유실 원인)
   - **변경 로직**: 메타 파일을 확인합니다.
     - **경로 일치**: 설정된 클라우드 경로가 메타 파일의 경로와 같다면, 이는 "단순 연결 오류/오프라인" 상황입니다. **로컬 데이터를 삭제하지 않고 보존합니다.** (오프라인 모드 진입)
     - **경로 불일치**: 경로가 다르다면 사용자가 저장소 위치를 변경한 것이므로, 기존 캐시를 삭제하고 새 경로(빈 상태)에 맞춥니다.

### 기대 효과
- 네트워크가 끊긴 상태에서 앱을 켜도 기존 노트/히스토리가 그대로 보입니다.
- 오프라인 상태에서 작성한 노트가 로컬 DB에 누적됩니다.
- 네트워크가 연결되면 누적된 데이터(기존+신규)가 클라우드로 정상 백업되어, 데이터 초기화 사고를 원천 방지합니다.

## 수정 파일
- `Utilities/DatabaseManager.cs`: `SyncFromCloudToLocal` 메서드 수정 및 `catch_sync_meta.txt` 관리 로직 추가.
