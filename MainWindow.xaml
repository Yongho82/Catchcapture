<Window x:Class="CatchCapture.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CatchCapture"
        mc:Ignorable="d"
        Title="캐치 캡처" Height="550" Width="350" 
        MinWidth="350" MinHeight="550"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" 
        Background="Transparent"
        FontFamily="Segoe UI">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="24" 
                     ResizeBorderThickness="0" 
                     GlassFrameThickness="0" 
                     CornerRadius="8" 
                     UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>
    
    <Window.Resources>
        <!-- 버튼 스타일 -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Margin" Value="5,3,5,3"/>
            <Setter Property="Background" Value="#F8F8F8"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Left" Margin="10,0,0,0"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#EBF0FF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#D0DAFF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 하단 버튼 스타일 (호버 효과 추가) -->
        <Style x:Key="BottomButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#EBF0FF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#D0DAFF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- 구분선 스타일 -->
        <Style x:Key="SeparatorStyle" TargetType="Separator">
            <Setter Property="Margin" Value="10,3,10,3"/>
            <Setter Property="Background" Value="#E0E6F0"/>
            <Setter Property="Height" Value="1"/>
        </Style>
        
        <!-- 그림자 효과 -->
        <DropShadowEffect x:Key="CardShadow" ShadowDepth="1" BlurRadius="5" Opacity="0.2" Direction="270"/>
        
        <!-- 닫기 버튼 스타일 -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#50FFFFFF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#30FFFFFF" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- 텍스트 렌더링 개선 스타일 -->
        <Style x:Key="ClearTextStyle" TargetType="TextBlock">
            <Setter Property="TextOptions.TextFormattingMode" Value="Ideal"/>
            <Setter Property="TextOptions.TextRenderingMode" Value="Auto"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="UseLayoutRounding" Value="True"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Border CornerRadius="8" Background="#F8F9FC" BorderThickness="1" Margin="0">
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#4361EE" Offset="0.0"/>
                    <GradientStop Color="#3A56D4" Offset="1.0"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="24"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- 제목 영역 -->
                <Border Grid.Row="0" CornerRadius="8,8,0,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#4361EE" Offset="0.0"/>
                            <GradientStop Color="#3A56D4" Offset="1.0"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid>
                        <StackPanel Orientation="Horizontal" Margin="10,0,0,0">
                            <Image Source="/icons/camera.png" Width="14" Height="14" Margin="0,0,5,0" 
                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                            <TextBlock Text="캐치캡처" Foreground="White" FontWeight="SemiBold" FontSize="12"
                                      Style="{StaticResource ClearTextStyle}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0">
                            <Button x:Name="MinimizeButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="MinimizeButton_Click" ToolTip="최소화" 
                                    WindowChrome.IsHitTestVisibleInChrome="True" Margin="0,0,5,0">
                                <TextBlock Text="-" FontSize="18" Foreground="White" Style="{StaticResource ClearTextStyle}" 
                                          VerticalAlignment="Top" Margin="0,-3,0,0"/>
                            </Button>
                            <Button x:Name="CloseButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="CloseButton_Click" ToolTip="닫기" 
                                    WindowChrome.IsHitTestVisibleInChrome="True">
                                <TextBlock Text="✕" FontSize="10" Foreground="White" Style="{StaticResource ClearTextStyle}"/>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- 메인 콘텐츠 영역 -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="110" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- 왼쪽 버튼 영역 (전체 높이) -->
                    <Border Grid.Column="0" Grid.RowSpan="2" Background="#FFFFFF" BorderThickness="0,0,1,0" BorderBrush="#E0E6F0">
                        <StackPanel Margin="0,12,0,12">
                            <Button x:Name="AreaCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="AreaCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/area_capture.png" Width="16" Height="16" Margin="0,0,5,0" 
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="영역 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>

                            <!-- 지연 캡처 버튼 (우측 서브메뉴) -->
                            <Button x:Name="DelayCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="DelayCaptureButton_Click">
                                <Button.ContextMenu>
                                    <ContextMenu Placement="Right" PlacementTarget="{Binding ElementName=DelayCaptureButton}">
                                        <MenuItem Header="지연없음" Tag="0" Click="DelayMenuItem_Click"/>
                                        <MenuItem Header="3초" Tag="3" Click="DelayMenuItem_Click"/>
                                        <MenuItem Header="5초" Tag="5" Click="DelayMenuItem_Click"/>
                                        <MenuItem Header="10초" Tag="10" Click="DelayMenuItem_Click"/>
                                    </ContextMenu>
                                </Button.ContextMenu>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/clock.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="지연 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 실시간 캡처 버튼 -->
                            <Button x:Name="RealTimeCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="RealTimeCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/real-time.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="순간 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 멀티 캡처 버튼 -->
                            <Button x:Name="MultiCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="MultiCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/multi_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="멀티 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <Button x:Name="FullScreenCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="FullScreenCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/full_screen.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="전체화면" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 지정 캡처 버튼 (스크롤캡처 대체) -->
                            <Button x:Name="DesignatedCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="DesignatedCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/designated.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="지정캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            <!-- 창 캡처 버튼 -->
                            <Button x:Name="WindowCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="WindowCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/window_cap.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="창 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 단위 캡처 버튼 -->
                            <Button x:Name="ElementCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="ElementCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/unit_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="단위 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 스크롤 캡처 버튼 -->
                            <Button x:Name="ScrollCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="ScrollCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/scroll_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="스크롤 캡처" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Style="{StaticResource SeparatorStyle}"/>    

                            <Button x:Name="SimpleModeButton" Style="{StaticResource SidebarButtonStyle}" Click="SimpleModeButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/simple_mode.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="간편 모드" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>
                    
                            <!-- 트레이 모드 버튼 -->
                            <Button x:Name="TrayModeButton" Style="{StaticResource SidebarButtonStyle}" Click="TrayModeButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/tray_mode.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <TextBlock Text="트레이모드" HorizontalAlignment="Left" FontSize="12"/>
                                </StackPanel>
                            </Button>

                        </StackPanel>
                    </Border>

                    <!-- 오른쪽 캡처 표시 영역 -->
                    <Border Grid.Column="1" Grid.Row="0" Background="#FFFFFF" Margin="0,0,0,0">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <!-- 단일 세로 열로 표시 -->
                            <StackPanel x:Name="CaptureListPanel" Margin="10"/>
                        </ScrollViewer>
                    </Border>

                    <!-- 하단 고정 아이콘 바 -->
                    <Border Grid.Column="1" Grid.Row="1" Background="#F8F9FC" BorderThickness="0,1,0,0" BorderBrush="#E0E6F0" Height="60">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <!-- 복사 버튼 -->
                            <Button x:Name="CopySelectedButton" Click="CopySelectedButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/copy_selected.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock Text="복사" FontSize="8" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 전체 복사 버튼 -->
                            <Button x:Name="CopyAllButton" Click="CopyAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/copy_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock Text="전체복사" FontSize="8" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="40" Margin="5,0" Background="#E0E6F0"/>
                            
                            <!-- 전체 저장 버튼 -->
                            <Button x:Name="SaveAllButton" Click="SaveAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/save_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock Text="전체저장" FontSize="8" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="40" Margin="2,0" Background="#E0E6F0"/>
                            
                            <!-- 전체 삭제 버튼 -->
                            <Button x:Name="DeleteAllButton" Click="DeleteAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/delete_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock Text="전체삭제" FontSize="8" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="40" Margin="2,0" Background="#E0E6F0"/>
                            
                            <!-- 설정 버튼 -->
                            <Button x:Name="SettingsBottomButton" Click="SettingsSideButton_Click"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/setting.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock Text="설정" FontSize="8" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>