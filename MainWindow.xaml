<Window x:Class="CatchCapture.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CatchCapture"
        mc:Ignorable="d"
        Title="캐치 캡처" Height="692" Width="400" 
        MinWidth="400" MinHeight="692"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" 
        Background="Transparent"
        Icon="icons/catcha.ico" 
        FontFamily="Segoe UI">
    
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="34" 
                     ResizeBorderThickness="0" 
                     GlassFrameThickness="0" 
                     CornerRadius="0" 
                     UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>
    
    <Window.Resources>
        <!-- 버튼 스타일 -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Margin" Value="5,3,5,3"/>
            <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeSidebarButtonBorder}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Left" Margin="10,0,0,0"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonHoverBackground}" TargetName="border"/>
                                <Setter Property="Opacity" Value="1.0" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonPressedBackground}" TargetName="border"/>
                                <Setter Property="Opacity" Value="1.0" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 하단 버튼 스타일 (호버 효과 추가) -->
        <Style x:Key="BottomButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="37"/>
            <Setter Property="Height" Value="37"/>
            <Setter Property="Margin" Value="2,0,2,0"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ThemeBorder}" TargetName="border"/>
                                <Setter Property="Opacity" Value="0.6" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ThemeBorder}" TargetName="border"/>
                                <Setter Property="Opacity" Value="0.8" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- 구분선 스타일 (정교한 1픽셀 라인) -->
        <Style x:Key="SeparatorStyle" TargetType="Separator">
            <Setter Property="Margin" Value="10,3,10,3"/>
            <Setter Property="Background" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="Height" Value="1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Separator">
                        <Rectangle Height="1" Fill="{TemplateBinding Background}" SnapsToDevicePixels="True"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- 그림자 효과 -->
        <DropShadowEffect x:Key="CardShadow" ShadowDepth="1" BlurRadius="5" Opacity="0.2" Direction="270"/>
        
        <!-- 닫기 버튼 스타일 -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#50FFFFFF" TargetName="border"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#30FFFFFF" TargetName="border"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- 세련된 컨텍스트 메뉴 스타일 -->
        <Style x:Key="ModernContextMenu" TargetType="ContextMenu">
            <Setter Property="Background" Value="{DynamicResource ThemeBackground}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource ThemeBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ContextMenu">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="15" Opacity="0.15" ShadowDepth="3" Direction="270"/>
                            </Border.Effect>
                            <ItemsPresenter Margin="2"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernMenuItem" TargetType="MenuItem">
            <Setter Property="Height" Value="34"/>
            <Setter Property="Foreground" Value="{DynamicResource ThemeForeground}"/>
            <Setter Property="Padding" Value="8,0,20,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="MenuItem">
                        <Border x:Name="templateRoot"
                                Background="Transparent"
                                BorderThickness="0"
                                CornerRadius="6"
                                Margin="2,1">
                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="8,0" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{TemplateBinding Header}" 
                                           VerticalAlignment="Center" Margin="{TemplateBinding Padding}"
                                           FontSize="11.5"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="templateRoot" Property="Background" Value="{DynamicResource ThemeSidebarButtonHoverBackground}"/>
                                <Setter Property="Foreground" Value="{DynamicResource ThemeTitleForeground}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 텍스트 렌더링 개선 스타일 (복구!) -->
        <Style x:Key="ClearTextStyle" TargetType="TextBlock">
            <Setter Property="TextOptions.TextFormattingMode" Value="Ideal"/>
            <Setter Property="TextOptions.TextRenderingMode" Value="Auto"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="UseLayoutRounding" Value="True"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Border CornerRadius="8" Background="{DynamicResource ThemeBackground}" BorderThickness="1" Margin="10" BorderBrush="{DynamicResource ThemeWindowBorder}">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2" BlurRadius="10" Opacity="0.3" Direction="270"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="24"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 제목 영역 -->
                <Border Grid.Row="0" CornerRadius="8,8,0,0" Background="{DynamicResource ThemeTitleBackground}" BorderThickness="0,0,0,1" BorderBrush="{DynamicResource ThemeBorder}">
                    <Grid>
                        <StackPanel Orientation="Horizontal" Margin="10,0,0,0">
                            <Image Source="/icons/camera.png" Width="14" Height="14" Margin="0,0,5,0" 
                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                            <TextBlock x:Name="TitleBarAppNameText" Text="캐치캡처" Foreground="{DynamicResource ThemeTitleForeground}" FontWeight="SemiBold" FontSize="12"
                                       Style="{StaticResource ClearTextStyle}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0">
                            <Button x:Name="TitleSimpleModeButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="SimpleModeButton_Click" ToolTip="간편 모드" 
                                    WindowChrome.IsHitTestVisibleInChrome="True" Margin="0,0,5,0">
                                <Image Source="/icons/simple_mode.png" Width="14" Height="14" 
                                       RenderOptions.BitmapScalingMode="HighQuality"/>
                            </Button>
                            <Button x:Name="TitleTrayModeButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="TrayModeButton_Click" ToolTip="트레이 모드" 
                                    WindowChrome.IsHitTestVisibleInChrome="True" Margin="0,0,5,0">
                                <Image Source="/icons/tray_mode.png" Width="14" Height="14" 
                                       RenderOptions.BitmapScalingMode="HighQuality"/>
                            </Button>
                            <Button x:Name="TitleThemeButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="ThemeCycleButton_Click" ToolTip="테마 변경" 
                                    WindowChrome.IsHitTestVisibleInChrome="True" Margin="0,0,5,0">
                                <TextBlock Text="&#xE706;" FontFamily="Segoe MDL2 Assets" FontSize="12" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                           Foreground="{DynamicResource ThemeTitleForeground}"/>
                            </Button>
                            <Button x:Name="MinimizeButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="MinimizeButton_Click" ToolTip="최소화" 
                                    WindowChrome.IsHitTestVisibleInChrome="True" Margin="0,0,5,0">
                                <TextBlock Text="-" FontSize="18" Foreground="{DynamicResource ThemeTitleForeground}" Style="{StaticResource ClearTextStyle}" 
                                          VerticalAlignment="Top" Margin="0,-3,0,0"/>
                            </Button>
                            <Button x:Name="CloseButton" Style="{StaticResource WindowControlButtonStyle}"
                                    Click="CloseButton_Click" ToolTip="닫기" 
                                    WindowChrome.IsHitTestVisibleInChrome="True">
                                <TextBlock Text="✕" FontSize="10" Foreground="{DynamicResource ThemeTitleForeground}" Style="{StaticResource ClearTextStyle}"/>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- 메인 콘텐츠 영역 -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- 왼쪽 버튼 영역 (전체 높이) -->
                    <Border Grid.Column="0" Grid.RowSpan="2" Background="{DynamicResource ThemePanelBackground}" BorderThickness="0,0,1,0" BorderBrush="{DynamicResource ThemeBorder}" SnapsToDevicePixels="True">
                        <StackPanel x:Name="CaptureButtonsPanel" Margin="0,12,0,12">
                            <Button x:Name="AreaCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="AreaCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/area_capture.png" Width="16" Height="16" Margin="0,0,5,0" 
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="AreaCaptureButtonText" Text="영역 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>

                            <!-- 엣지 캡처 버튼 (이모지 선택 버튼 포함) -->
                            <Grid x:Name="EdgeCaptureGrid" Margin="5,3,5,3">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- 메인 캡처 버튼 -->
                                <Button x:Name="EdgeCaptureButton" Grid.Column="0" Height="35"
                                        Background="{DynamicResource ThemeSidebarButtonBackground}"
                                        Foreground="{DynamicResource ThemeForeground}"
                                        BorderThickness="1,1,0,1"
                                        BorderBrush="{DynamicResource ThemeSidebarButtonBorder}"
                                        Cursor="Hand" Focusable="False"
                                        Click="EdgeCaptureButton_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="6,0,0,6">
                                                <ContentPresenter HorizontalAlignment="Left" Margin="10,0,0,0"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonHoverBackground}" TargetName="border"/>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonPressedBackground}" TargetName="border"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Source="/icons/edge_capture.png" Width="16" Height="16" Margin="0,0,5,0" 
                                               RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <Viewbox Width="70" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                            <TextBlock x:Name="EdgeCaptureButtonText" Text="엣지 캡처" FontSize="12"/>
                                        </Viewbox>
                                    </StackPanel>
                                </Button>
                                
                                <!-- 이모지 선택 버튼 (오른쪽 끝) -->
                                <Border x:Name="EdgeRadiusSelectorBorder" Grid.Column="1" 
                                        Width="28" Height="35"
                                        BorderBrush="{DynamicResource ThemeSidebarButtonBorder}"
                                        BorderThickness="0,1,1,1"
                                        CornerRadius="0,6,6,0"
                                        Cursor="Hand"
                                        MouseLeftButtonDown="EdgeRadiusSelector_Click">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonBackground}"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ThemeSidebarButtonHoverBackground}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Border.ContextMenu>
                                        <ContextMenu x:Name="EdgeRadiusContextMenu" Style="{StaticResource ModernContextMenu}" Placement="Right">
                                            <MenuItem Header="1. 소프트 엣지" Tag="12" Style="{StaticResource ModernMenuItem}" Click="EdgeMenuItem_Click">
                                                <MenuItem.Icon>
                                                    <Image Source="/icons/edge_1.png" Width="16" Height="16" RenderOptions.BitmapScalingMode="HighQuality"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="2. 매끄러운 둥근 모서리" Tag="25" Style="{StaticResource ModernMenuItem}" Click="EdgeMenuItem_Click">
                                                <MenuItem.Icon>
                                                    <Image Source="/icons/edge_2.png" Width="16" Height="16" RenderOptions.BitmapScalingMode="HighQuality"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="3. 클래식 라운드" Tag="50" Style="{StaticResource ModernMenuItem}" Click="EdgeMenuItem_Click">
                                                <MenuItem.Icon>
                                                    <Image Source="/icons/edge_3.png" Width="16" Height="16" RenderOptions.BitmapScalingMode="HighQuality"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="4. 알약 스타일" Tag="100" Style="{StaticResource ModernMenuItem}" Click="EdgeMenuItem_Click">
                                                <MenuItem.Icon>
                                                    <Image Source="/icons/edge_4.png" Width="16" Height="16" RenderOptions.BitmapScalingMode="HighQuality"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="5. 퍼펙트 서클" Tag="999" Style="{StaticResource ModernMenuItem}" Click="EdgeMenuItem_Click">
                                                <MenuItem.Icon>
                                                    <Image Source="/icons/edge_5.png" Width="16" Height="16" RenderOptions.BitmapScalingMode="HighQuality"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                        </ContextMenu>
                                    </Border.ContextMenu>
                                    <Image x:Name="EdgeRadiusImage" 
                                           Source="/icons/edge_1.png" 
                                           Width="16" Height="16" 
                                           HorizontalAlignment="Center" 
                                           VerticalAlignment="Center"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           ToolTip="클릭하여 엣지 스타일 변경"/>
                                </Border>
                            </Grid>

                            <!-- 지연 캡처 버튼 (우측 서브메뉴) -->
                            <Button x:Name="DelayCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="DelayCaptureButton_Click">
                                <Button.ContextMenu>
                                    <ContextMenu Style="{StaticResource ModernContextMenu}" Placement="Right" PlacementTarget="{Binding ElementName=DelayCaptureButton}">
                                        <MenuItem x:Name="DelayNoneMenu" Style="{StaticResource ModernMenuItem}" Header="지연없음" Tag="0" Click="DelayMenuItem_Click">
                                            <MenuItem.Icon>
                                                <TextBlock Text="0" FontWeight="Bold" Opacity="0.5" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem x:Name="Delay3Menu" Style="{StaticResource ModernMenuItem}" Header="3초" Tag="3" Click="DelayMenuItem_Click">
                                            <MenuItem.Icon>
                                                <TextBlock Text="3" FontWeight="Bold" Foreground="#007AFF" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem x:Name="Delay5Menu" Style="{StaticResource ModernMenuItem}" Header="5초" Tag="5" Click="DelayMenuItem_Click">
                                            <MenuItem.Icon>
                                                <TextBlock Text="5" FontWeight="Bold" Foreground="#007AFF" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem x:Name="Delay10Menu" Style="{StaticResource ModernMenuItem}" Header="10초" Tag="10" Click="DelayMenuItem_Click">
                                            <MenuItem.Icon>
                                                <TextBlock Text="10" FontWeight="Bold" Foreground="#34C759" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                    </ContextMenu>
                                </Button.ContextMenu>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/clock.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="DelayCaptureButtonText" Text="지연 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 실시간 캡처 버튼 -->
                            <Button x:Name="RealTimeCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="RealTimeCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/real-time.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="RealTimeCaptureButtonText" Text="순간 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 멀티 캡처 버튼 -->
                            <Button x:Name="MultiCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="MultiCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/multi_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="MultiCaptureButtonText" Text="멀티 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <Button x:Name="FullScreenCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="FullScreenCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/full_screen.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="FullScreenButtonText" Text="전체화면" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 지정 캡처 버튼 (스크롤캡처 대체) -->
                            <Button x:Name="DesignatedCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="DesignatedCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/designated.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="DesignatedCaptureButtonText" Text="지정캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            <!-- 창 캡처 버튼 -->
                            <Button x:Name="WindowCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="WindowCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/window_cap.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="WindowCaptureButtonText" Text="창 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 단위 캡처 버튼 -->
                            <Button x:Name="ElementCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="ElementCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/unit_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="ElementCaptureButtonText" Text="단위 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 스크롤 캡처 버튼 -->
                            <Button x:Name="ScrollCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="ScrollCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/scroll_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="ScrollCaptureButtonText" Text="스크롤 캡처" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>

                             <!-- 문자 추출 버튼 (OCR) -->
                            <Button x:Name="OcrCaptureButton" Style="{StaticResource SidebarButtonStyle}" Click="OcrCaptureButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/ocr_capture.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="OcrCaptureButtonText" Text="문자 추출" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>
                            
                            <!-- 화면 녹화 버튼 -->
                            <Button x:Name="ScreenRecordButton" Style="{StaticResource SidebarButtonStyle}" Click="ScreenRecordButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="/icons/videocamera.png" Width="16" Height="16" Margin="0,0,5,0"
                                           RenderOptions.BitmapScalingMode="HighQuality"/>
                                    <Viewbox Width="100" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                        <TextBlock x:Name="ScreenRecordButtonText" FontSize="12"/>
                                    </Viewbox>
                                </StackPanel>
                            </Button>

                            <Separator Style="{StaticResource SeparatorStyle}"/>

                            <!-- 미니 스위치 패널 (정렬 개선) -->
                            <Grid HorizontalAlignment="Center" Margin="0,10,0,5">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="8"/> <!-- 간격 -->
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- 즉시편집 -->
                                <Viewbox x:Name="InstantEditPanel" Width="65" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Right" Margin="0,0,8,0" Grid.Row="0" Grid.Column="0">
                                    <TextBlock x:Name="InstantEditLabel" 
                                               Text="즉시편집" 
                                               VerticalAlignment="Center" 
                                               FontSize="11" 
                                               Foreground="{DynamicResource ThemeForeground}"
                                               Opacity="0.8"/>
                                </Viewbox>
                                
                                <Border x:Name="InstantEditToggleBorder" 
                                       Grid.Row="0" Grid.Column="1"
                                       Width="30" 
                                       Height="16" 
                                       CornerRadius="8" 
                                       Background="#3D3D3D"
                                       Cursor="Hand"
                                       MouseLeftButtonDown="InstantEditToggle_Click">
                                    <Ellipse x:Name="InstantEditToggleCircle" 
                                            Width="12" 
                                            Height="12" 
                                            Fill="White" 
                                            HorizontalAlignment="Left"
                                            Margin="2,0,0,0">
                                        <Ellipse.Effect>
                                            <DropShadowEffect ShadowDepth="1" BlurRadius="2" Opacity="0.2"/>
                                        </Ellipse.Effect>
                                    </Ellipse>
                                </Border>

                                <!-- 편집열기 -->
                                <Viewbox x:Name="OpenEditorPanel" Width="65" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Right" Margin="0,0,8,0" Grid.Row="2" Grid.Column="0">
                                    <TextBlock x:Name="OpenEditorLabel" 
                                               Text="편집열기" 
                                               VerticalAlignment="Center" 
                                               FontSize="11" 
                                               Foreground="{DynamicResource ThemeForeground}"
                                               Opacity="0.8"/>
                                </Viewbox>
                                
                                <Border x:Name="OpenEditorToggleBorder" 
                                       Grid.Row="2" Grid.Column="1"
                                       Width="30" 
                                       Height="16" 
                                       CornerRadius="8" 
                                       Background="#3D3D3D"
                                       Cursor="Hand"
                                       MouseLeftButtonDown="OpenEditorToggle_Click">
                                    <Ellipse x:Name="OpenEditorToggleCircle" 
                                            Width="12" 
                                            Height="12" 
                                            Fill="White" 
                                            HorizontalAlignment="Left"
                                            Margin="2,0,0,0">
                                        <Ellipse.Effect>
                                            <DropShadowEffect ShadowDepth="1" BlurRadius="2" Opacity="0.2"/>
                                        </Ellipse.Effect>
                                    </Ellipse>
                                </Border>
                            </Grid>

                            <!-- 모드 선택 구분선 (위치 상향 조정 및 라인 정밀화) -->
                            <Grid Margin="0,3,0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Rectangle Height="1" VerticalAlignment="Center" Fill="{DynamicResource ThemeBorder}" SnapsToDevicePixels="True"/>
                                <Viewbox Grid.Column="1" MaxWidth="100" Stretch="Uniform" StretchDirection="DownOnly" Margin="5,0">
                                    <TextBlock x:Name="ModeSelectText" Text="모드 선택" FontSize="10.5" Foreground="{DynamicResource ThemeForeground}" Opacity="0.6"/>
                                </Viewbox>
                                <Rectangle Grid.Column="2" Height="1" VerticalAlignment="Center" Fill="{DynamicResource ThemeBorder}" SnapsToDevicePixels="True"/>
                            </Grid>

                            <!-- 간편/트레이 모드 버튼 (초소형/심플) -->
                            <UniformGrid Columns="2" Margin="3,0,7,20">
                                <Button x:Name="SimpleModeButton" Click="SimpleModeButton_Click" Height="22" Margin="5,0,7,0" 
                                        Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="간편 모드" FocusVisualStyle="{x:Null}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ThemeBorder}" TargetName="border"/>
                                                    <Setter Property="Opacity" Value="0.6" TargetName="border"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <Image Source="/icons/simple_mode.png" Width="12" Height="12" Margin="0,0,3,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <Viewbox Width="52" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                            <TextBlock x:Name="SimpleModeButtonText" Text="간편모드" FontSize="12" VerticalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" FontWeight="Normal"/>
                                        </Viewbox>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="TrayModeButton" Click="TrayModeButton_Click" Height="22" Margin="2,0,0,0" 
                                        Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="트레이 모드" FocusVisualStyle="{x:Null}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource ThemeBorder}" TargetName="border"/>
                                                    <Setter Property="Opacity" Value="0.6" TargetName="border"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <Image Source="/icons/tray_mode.png" Width="12" Height="12" Margin="0,0,3,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <Viewbox Width="52" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Left">
                                            <TextBlock x:Name="TrayModeButtonText" Text="트레이모드" FontSize="12" VerticalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" FontWeight="Normal"/>
                                        </Viewbox>
                                    </StackPanel>
                                </Button>
                            </UniformGrid>
                        </StackPanel> <!-- 큰 StackPanel이 여기서 닫혀야 함 -->
                    </Border>

                    <!-- 오른쪽 캡처 표시 영역 -->
                    <Border Grid.Column="1" Grid.Row="0" Background="{DynamicResource ThemePanelBackground}" Margin="0,0,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/> <!-- View Mode Controls -->
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- View Mode Buttons -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,1,10,0">
                                <Border Background="{DynamicResource ThemeSidebarButtonBackground}" BorderBrush="{DynamicResource ThemeBorder}" BorderThickness="1" CornerRadius="3" Padding="1" Height="24" VerticalAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="BtnViewList" Click="BtnViewMode_Click" Tag="List" Width="22" Height="22" Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="리스트형 보기">
                                            <Viewbox Width="11" Height="11">
                                                <Path x:Name="PathViewList" Data="M3,5H21V7H3V5M3,11H21V13H3V11M3,17H21V19H3V17Z" Fill="{DynamicResource ThemeForeground}" Opacity="1.0"/>
                                            </Viewbox>
                                        </Button>
                                        <Button x:Name="BtnViewCard" Click="BtnViewMode_Click" Tag="Card" Width="22" Height="22" Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="카드형 보기">
                                            <Viewbox Width="11" Height="11">
                                                <Path x:Name="PathViewCard" Data="M3,3H11V11H3V3M13,3H21V11H13V3M3,13H11V21H3V13M13,13H21V21H13V13Z" Fill="{DynamicResource ThemeForeground}" Opacity="0.4"/>
                                            </Viewbox>
                                        </Button>
                                        <Rectangle Width="1" Height="14" Fill="{DynamicResource ThemeBorder}" Margin="2,0" VerticalAlignment="Center"/>
                                        <Button x:Name="BtnHistory" Click="BtnHistory_Click" Width="22" Height="22" Background="Transparent" BorderThickness="0" Cursor="Hand" ToolTip="히스토리">
                                            <Viewbox Width="11" Height="11">
                                                <TextBlock Text="🕒" Foreground="{DynamicResource ThemeForeground}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                            </Viewbox>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                            
                            <!-- 로고 (캡처 목록이 비어있을 때만 표시) -->
                            <Image x:Name="EmptyStateLogo"
                                   Grid.Row="1" 
                                   Width="160" Height="160"
                                   Source="/icons/icon_main.png"
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"
                                   Opacity="0.7"
                                   Visibility="Visible"/>
                            
                            <!-- 캡처 리스트 -->
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" FocusVisualStyle="{x:Null}">
                                <!-- 기본형은 가로 전체 너비 사용, 카드형은 가로로 나열 -->
                                <WrapPanel x:Name="CaptureListPanel" Margin="10,0,10,0" HorizontalAlignment="Left"/>
                            </ScrollViewer>

                            <!-- 하단 버튼 영역 -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,2,10,5">
                                <!-- 내 노트 열기 버튼 -->
                                <Button x:Name="OpenMyNoteButton" 
                                        Click="OpenMyNoteButton_Click"
                                        Margin="0,0,15,0"
                                        Background="Transparent" BorderThickness="0" Cursor="Hand" FocusVisualStyle="{x:Null}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Opacity" Value="0.7"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Source="/icons/my_note.png" Width="18" Height="18" Margin="0,0,5,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <TextBlock x:Name="OpenMyNoteButtonText" Text="내 노트 열기" FontSize="12" Foreground="{DynamicResource ThemeForeground}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <!-- 저장 폴더 열기 버튼 -->
                                <Button x:Name="OpenSaveFolderButton" 
                                        Click="OpenSaveFolderButton_Click"
                                        Background="Transparent" BorderThickness="0" Cursor="Hand" FocusVisualStyle="{x:Null}">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}">
                                                <ContentPresenter/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Opacity" Value="0.7"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Source="/icons/openfolder.png" Width="18" Height="18" Margin="0,0,5,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                                        <TextBlock x:Name="OpenSaveFolderButtonText" Text="저장 폴더 열기" FontSize="12" Foreground="{DynamicResource ThemeForeground}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- 하단 고정 아이콘 바 (라인 두께 및 색상 조정) -->
                    <Border Grid.Column="1" Grid.Row="1" Background="{DynamicResource ThemePanelBackground}" BorderThickness="0,1,0,0" BorderBrush="{DynamicResource ThemeBorder}" Height="50" SnapsToDevicePixels="True">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <!-- 복사 버튼 -->
                            <Button x:Name="CopySelectedButton" Click="CopySelectedButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/copy_selected.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock x:Name="CopySelectedBottomText" Text="복사" FontSize="9" FontWeight="Normal" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" Opacity="0.8" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </Button>
                            
                            <!-- 전체 복사 버튼 -->
                            <Button x:Name="CopyAllButton" Click="CopyAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/copy_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock x:Name="CopyAllBottomText" Text="전체복사" FontSize="9" FontWeight="Normal" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" Opacity="0.8" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="25" Margin="3,0" Background="{DynamicResource ThemeBorder}"/>
                            
                            <!-- 전체 저장 버튼 -->
                            <Button x:Name="SaveAllButton" Click="SaveAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/save_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock x:Name="SaveAllBottomText" Text="전체저장" FontSize="9" FontWeight="Normal" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" Opacity="0.8" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="25" Margin="3,0" Background="{DynamicResource ThemeBorder}"/>
                            
                            <!-- 전체 삭제 버튼 -->
                            <Button x:Name="DeleteAllButton" Click="DeleteAllButton_Click" IsEnabled="False"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/delete_all.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock x:Name="DeleteAllBottomText" Text="전체삭제" FontSize="9" FontWeight="Normal" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" Opacity="0.8" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </Button>
                            
                            <Separator Width="1" Height="25" Margin="3,0" Background="{DynamicResource ThemeBorder}"/>
                            
                            <!-- 설정 버튼 -->
                            <Button x:Name="SettingsBottomButton" Click="SettingsSideButton_Click"
                                    Style="{StaticResource BottomButtonStyle}">
                                <StackPanel>
                                    <Image Source="/icons/setting.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality" Margin="0,0,0,2"/>
                                    <TextBlock x:Name="SettingsBottomText" Text="설정" FontSize="9" FontWeight="Normal" FontFamily="Segoe UI" HorizontalAlignment="Center" Foreground="{DynamicResource ThemeForeground}" Opacity="0.8" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>     
                <!-- 하단 팁 영역 -->
                <Border Grid.Row="2" 
                        Background="{DynamicResource ThemePanelBackground}" 
                        BorderBrush="{DynamicResource ThemeBorder}" 
                        BorderThickness="0,1,0,0"
                        Height="28"
                        SnapsToDevicePixels="True">
                    <StackPanel Orientation="Horizontal" 
                                VerticalAlignment="Center" 
                                Margin="12,0">
                        <TextBlock Text="TIP" 
                                   FontSize="10" 
                                   FontWeight="Bold" 
                                   Foreground="#007AFF" 
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0"/>
                        <Viewbox MaxWidth="330" MaxHeight="16" Stretch="Uniform" StretchDirection="DownOnly">
                            <TextBlock x:Name="TipTextBlock" 
                                       Text="캡처 목록 이미지를 더블클릭해 빠르게 편집할 수 있어요." 
                                       FontSize="11" 
                                       Foreground="{DynamicResource ThemeForeground}" Opacity="0.8"/>
                        </Viewbox>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>