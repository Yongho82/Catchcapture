<Window x:Class="CatchCapture.Recording.RecordingOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="녹화 영역" 
        WindowStyle="None" 
        AllowsTransparency="True" 
        Background="Transparent"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Topmost="True"
        WindowStartupLocation="Manual"
        Focusable="True"
        KeyDown="Window_KeyDown">
    
    <Canvas x:Name="OverlayCanvas">
        <!-- 반투명 배경 (4개 영역으로 분할) -->
        <Rectangle x:Name="DimTop" Fill="#60000000" IsHitTestVisible="False"/>
        <Rectangle x:Name="DimBottom" Fill="#60000000" IsHitTestVisible="False"/>
        <Rectangle x:Name="DimLeft" Fill="#60000000" IsHitTestVisible="False"/>
        <Rectangle x:Name="DimRight" Fill="#60000000" IsHitTestVisible="False"/>
        
        <!-- 선택 영역 테두리 -->
        <Border x:Name="SelectionBorder"
                BorderThickness="3"
                Background="Transparent"
                Cursor="SizeAll"
                MouseLeftButtonDown="SelectionBorder_MouseLeftButtonDown"
                MouseMove="SelectionBorder_MouseMove"
                MouseLeftButtonUp="SelectionBorder_MouseLeftButtonUp">
            <Border.BorderBrush>
                <SolidColorBrush Color="#4361EE"/>
            </Border.BorderBrush>
        </Border>
        
        <!-- 도형/번호 영역 -->
        <Canvas x:Name="ShapeCanvas" Background="Transparent" IsHitTestVisible="False"/>

        <!-- 그리기 영역 (펜, 형광펜) -->
        <InkCanvas x:Name="DrawingCanvas" Background="Transparent" IsHitTestVisible="False" Cursor="Cross"/>
        
        <!-- 크기 표시 라벨 -->
        <Border x:Name="SizeLabelBorder" Background="#CC4361EE" CornerRadius="3" Padding="8,4">
            <TextBlock x:Name="SizeLabel" 
                       Text="800 x 600"
                       Foreground="White"
                       FontSize="12"
                       FontWeight="SemiBold"/>
        </Border>
        
        <!-- 리사이즈 핸들 (8개) -->
        <Rectangle x:Name="HandleNW" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNWSE" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="NW"/>
        <Rectangle x:Name="HandleN" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNS" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="N"/>
        <Rectangle x:Name="HandleNE" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNESW" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="NE"/>
        <Rectangle x:Name="HandleE" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeWE" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="E"/>
        <Rectangle x:Name="HandleSE" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNWSE" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="SE"/>
        <Rectangle x:Name="HandleS" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNS" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="S"/>
        <Rectangle x:Name="HandleSW" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeNESW" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="SW"/>
        <Rectangle x:Name="HandleW" Width="10" Height="10" Fill="White" Stroke="#4361EE" StrokeThickness="1"
                   Cursor="SizeWE" MouseLeftButtonDown="Handle_MouseLeftButtonDown" Tag="W"/>
                   
        <!-- 새 영역 선택을 위한 히트 박스 (평소에는 숨김) -->
        <Rectangle x:Name="SelectionHitTarget" Fill="Transparent" 
                   Visibility="Collapsed"
                   Cursor="Cross"
                   MouseLeftButtonDown="SelectionHitTarget_MouseLeftButtonDown"
                   MouseMove="SelectionHitTarget_MouseMove"
                   MouseLeftButtonUp="SelectionHitTarget_MouseLeftButtonUp"/>
    </Canvas>
</Window>
